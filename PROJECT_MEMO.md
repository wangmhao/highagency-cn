# HighAgency.cn 项目备忘录

## 项目概述
**项目名称**: HighAgency.cn 中文精译网站
**项目目标**: 将 George Mack 的《High Agency: What It Is, How to Get It, and Why It Matters》一文翻译为中文，并建立一个专业、美观、功能完整的静态网站
**项目周期**: 2026年1月20日 - 2026年1月21日
**交付状态**: ✅ 已完成并上线

## 项目背景
- 原文为英文，内容深刻，对中文读者有重要价值
- 购买了域名 `highagency.cn`，希望建立独立网站而非简单翻译
- 需要复刻原站 (highagency.com) 的设计风格和阅读体验
- 针对中文互联网环境进行优化

## 技术栈
- **构建工具**: Node.js + markdown-it + cheerio
- **前端技术**: 纯 HTML/CSS/JavaScript (无框架)
- **样式设计**: CSS Grid + Flexbox + 响应式布局
- **部署平台**: Vercel (全球 CDN)
- **版本控制**: Git + GitHub
- **数据分析**: 百度统计 + Google Analytics 4

## 项目里程碑

### 第一阶段：基础建设 (1月20日)
1. **项目初始化**
   - 创建 Node.js 项目，安装依赖
   - 编写基础构建脚本 `build.js`
   - 根据原站风格创建 `style.css`

2. **内容处理**
   - 处理原始 Markdown 文件中的图片问题
   - 从原站爬取图片并本地化
   - 解决中英文混合段落问题

3. **双语功能**
   - 实现中英文切换功能
   - 添加切换按钮和 CSS 样式
   - 处理 YouTube/X 链接的安全提示

### 第二阶段：架构优化 (1月20日)
1. **结构重构**
   - 放弃注入到原站 HTML 的方案
   - 创建全新的布局结构 (`style_replica.css`)
   - 实现侧边栏目录 + 主内容区的经典布局

2. **内容精炼**
   - 用户提供手动整理的 `final_cn.md`
   - 移除中英切换功能，专注中文体验
   - 优化排版和格式

### 第三阶段：功能完善 (1月21日)
1. **交互功能**
   - 添加蓝色阅读进度条
   - 实现目录滚动跟随 (ScrollSpy)
   - 优化中英自动间距 (pangu.js)

2. **本土化适配**
   - 本地化所有外部脚本
   - 添加一键分享按钮 (微信/朋友圈友好)
   - 实现两端对齐排版

3. **SEO/GEO 优化**
   - 完整的 Meta 标签和 Open Graph 协议
   - JSON-LD 结构化数据 (Article schema)
   - 生成 sitemap.xml 和 robots.txt
   - 明确允许 AI 爬虫 (GPTBot, CCBot, Google-Extended)

4. **数据分析**
   - 集成百度统计
   - 集成 Google Analytics 4

## 核心功能特性

### 1. 视觉设计
- 完美复刻原站的设计语言
- 响应式布局 (桌面端 280px 侧边栏 + 主内容区)
- 移动端隐藏侧边栏，全屏阅读
- 深色模式支持 (CSS prefers-color-scheme)

### 2. 阅读体验
- **侧边栏目录**: 自动从 H1-H3 标题生成，点击跳转
- **滚动跟随**: 目录项随阅读进度高亮，自动滚动保持可见
- **进度条**: 蓝色进度条仅覆盖主内容区，精准反映阅读进度
- **中英间距**: 自动在中英文之间添加空格，提升可读性

### 3. 内容优化
- **引用块**: 灰色背景 + 左侧边框，视觉区分明显
- **列表项**: 增加间距，提升可读性
- **粗体强调**: 加深颜色，作为视觉锚点
- **图片处理**: 远程 CDN 图片，确保加载速度

### 4. 本土化特性
- **一键分享**: 复制包含标题和链接的推荐文案
- **两端对齐**: 正文强制两端对齐，消除右侧参差
- **本地资源**: 所有 JavaScript 和 CSS 本地化，无外部依赖
- **安全提示**: YouTube/X 链接添加确认弹窗

### 5. 技术优化
- **构建流程**: Markdown → HTML 自动转换
- **代码压缩**: 头像图片从 5.9MB 优化至 56KB
- **部署自动化**: GitHub + Vercel 持续部署
- **错误处理**: 构建脚本包含完整错误处理

## 文件结构
```
highagency-cn/
├── index.html              # 生成的网站页面
├── style_replica.css       # 主样式文件
├── final_cn.md            # 中文精译内容源
├── build_final.js         # 构建脚本
├── avatar_small.png       # 优化后的头像 (56KB)
├── pangu.min.js           # 本地化的中英间距脚本
├── sitemap.xml            # 站点地图
├── robots.txt             # 爬虫协议
├── source_original_mixed.md # 原始中英混合文档 (存档)
└── package.json           # 项目配置
```

## 关键决策记录

### 1. 架构选择
**问题**: 最初尝试将中文内容注入到原站 HTML 中
**决策**: 放弃注入方案，创建全新布局
**原因**: 原站 HTML 结构复杂且可能变化，维护成本高；全新布局更可控、更简洁

### 2. 双语功能
**问题**: 中英文段落混合，切换体验不佳
**决策**: 移除中英切换，专注中文体验
**原因**: 只有标题有英文对应，正文无完整对照；半成品功能不如专注单一语言

### 3. 图片策略
**问题**: 原始图片来自飞书，无法访问
**决策**: 使用原站 CDN 图片，不本地化
**原因**: CDN 图片质量高、加载快；本地化增加部署体积和维护成本

### 4. 部署方案
**问题**: 阿里云域名需要备案
**决策**: 使用 Vercel + GitHub 免备案方案
**原因**: 快速上线，全球 CDN，自动部署，成本为零

## 技术难点与解决方案

### 1. 中英文混合段落
**难点**: 原始 Markdown 中英文在同一段落
**解决方案**: 编写多个正则处理脚本 (`separate_*.js`)，分阶段处理

### 2. 滚动跟随
**难点**: 实现目录项随阅读进度高亮
**解决方案**: 使用 IntersectionObserver API，监听标题进入视口

### 3. 进度条定位
**难点**: 进度条应该只覆盖主内容区
**解决方案**: CSS 计算宽度和左边距，响应式适配移动端

### 4. GEO 优化
**难点**: 让 AI 理解内容价值
**解决方案**: JSON-LD 结构化数据 + 明确允许 AI 爬虫

## 性能指标
- **页面大小**: ~90KB (HTML) + ~10KB (CSS) + ~56KB (图片)
- **加载时间**: < 1秒 (Vercel 全球 CDN)
- **首次内容绘制**: < 500ms
- **完全可交互**: < 1秒

## 维护指南

### 内容更新
1. 编辑 `final_cn.md`
2. 运行 `node build_final.js`
3. 提交更改: `git add . && git commit -m "更新内容" && git push`
4. Vercel 自动部署 (约30秒)

### 样式修改
1. 编辑 `style_replica.css`
2. 重新构建: `node build_final.js`
3. 提交并推送

### 数据分析
- **百度统计**: https://tongji.baidu.com
- **Google Analytics**: https://analytics.google.com
- 数据延迟: 通常需要几小时显示

## 未来迭代建议

### 短期 (1-3个月)
1. **内容扩展**: 翻译更多相关文章
2. **评论功能**: 添加轻量级评论系统
3. **邮件订阅**: 收集读者邮箱，推送更新

### 中期 (3-6个月)
1. **多语言支持**: 完整的英中对照版本
2. **交互元素**: 添加可交互的示例和练习
3. **社区功能**: 读者案例分享

### 长期 (6-12个月)
1. **内容平台**: 扩展为高能动性主题的内容平台
2. **课程产品**: 开发相关课程或工作坊
3. **移动应用**: 开发移动端应用

## 项目团队
- **产品/内容**: 用户 (内容整理、决策)
- **技术实现**: Claude Code (开发、部署、优化)
- **设计参考**: highagency.com (视觉风格)

## 项目价值
1. **内容价值**: 将重要的思想带给中文读者
2. **技术价值**: 完整的现代静态网站开发范例
3. **商业价值**: 建立了品牌和流量入口
4. **学习价值**: 展示了从零到一的完整项目流程

## 关键收获
1. **内容优先**: 高质量内容是网站的核心
2. **渐进增强**: 从基础功能开始，逐步完善
3. **本土化思维**: 针对目标用户环境优化
4. **自动化流程**: 构建-部署自动化节省大量时间
5. **数据驱动**: 从上线第一天就开始收集数据

## 项目链接
- **网站**: https://highagency.cn
- **代码仓库**: https://github.com/wangmhao/highagency-cn
- **原站参考**: https://www.highagency.com

---

*备忘录创建时间: 2026年1月21日*
*最后更新: 2026年1月21日*
*文档状态: 完成 ✅*
